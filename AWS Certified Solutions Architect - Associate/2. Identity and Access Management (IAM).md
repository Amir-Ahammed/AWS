## 🔐 What is IAM?
Identity and Access Management (IAM) is a framework of policies and technologies that ensures the right individuals (or systems) have the right access to the right resources at the right time.
### ✨ Key Functions of IAM
* **Authentication:** Verifying identity (e.g., username + password, MFA)
* **Authorization:** Granting access based on roles and policies
* **User Management:** Creating, updating, and deleting user identities
* **Access Control:** Defining who can access what and under what conditions
* **Audit & Monitoring:** Tracking access and changes for security and compliance
IAM is essential in cloud platforms like AWS, Azure, and Google Cloud to manage access securely and efficiently

## IAM: Users & Groups
**AWS Identity and Access Management (IAM)** enables secure management of access to AWS services and resources for users and groups. IAM allows you to create users, organize them into groups, and assign permissions using.

A **root account** is created by default. It should *never* be shared or used for daily tasks.

### Users
- A **user** is an individual identity with long-term credentials (username and password or access keys).
- Used to represent real people or applications that interact with AWS.
- Can be assigned permissions directly or through groups.
- Best practice: Avoid assigning permissions directly to users unless necessary.

### Groups
- A **group** is a collection of IAM users.
- Used to manage permissions for multiple users easily.
- Groups cannot contain other groups.
- Users can belong to **multiple groups**.
- Permissions assigned to a group are inherited by all members.

### User & Group Structure 
![image](https://github.com/user-attachments/assets/dd38ddc7-8fd1-43e1-9050-97a61b06a7e5)

> Note: Charles belongs to both **Developers** and **Audit Team**, while David is in both **Audit Team** and **Operations**. Fred is not assigned to any group.


## IAM: Permissions 
Permissions in AWS IAM define what actions a **user**, **group**, or **role** can perform on which AWS **resources**, and under what **conditions**. Permissions are defined using JSON documents called **policies**.

### Policies
Policies are JSON documents that **grant or deny permissions**. They define _who_ can do _what_ to _which resources_ and _under what conditions_.
- **Grants or denies permissions to users, groups, or roles**: Policies determine whether an IAM identity (like a user, group, or role) can access specific AWS services or actions.
- **Can be attached to IAM identities or AWS resources**: Policies can be associated with:
  - **IAM identities** – to control what actions they can perform.
  - **AWS resources** – like S3 buckets or Lambda functions, to control who can access them.

### Types of Policies
- **Managed Policies**: Predefined by AWS or created by you and can be attached to multiple entities.
- **Inline Policies**: Embedded directly into a single user, group, or role—tightly coupled and not reusable.

### IAM Policies Structure
![image](https://github.com/user-attachments/assets/881fd8dd-d8aa-45d8-8bdd-1a14bb6a8583)


### Elements Breakdown

| Element     | Description                                                                 |
|-------------|-----------------------------------------------------------------------------|
| `Version`   | Specifies the policy language version. Example: `"2012-10-17"`              |
| `Id`        | Optional identifier for the policy. Helpful for tracking or audit purposes. |
| `Statement` | One or more permission statements (rules).                                  |

Within each `Statement` block:
- **Sid**: (Optional) A unique identifier for the statement.
- **Effect**: Determines whether to `Allow` or `Deny` the permissions.
- **Principal**: Specifies the user, role, or service the permissions apply to (mainly for resource-based policies).
- **Action**: Lists the operations permitted or denied (e.g., `s3:PutObject`, `ec2:StartInstances`).
- **Resource**: Identifies the AWS resources affected (e.g., `arn:aws:s3:::mybucket/*`).
- **Condition**: (Optional) Specifies circumstances under which the permissions are in effect (e.g., IP address, time of day, MFA).

### 📌 Example Policy Snippet (for reference)

```json
{
  "Version": "2012-10-17",
  "Id": "PolicyForS3ReadAccessWithMFA",
  "Statement": [
    {
      "Sid": "AllowS3ReadOnlyWithMFA",
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::123456789012:user/ExampleUser"
      },
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::example-bucket/*",
      "Condition": {
        "Bool": {
          "aws:MultiFactorAuthPresent": "true"
        },
        "IpAddress": {
          "aws:SourceIp": "203.0.113.0/24"
        }
      }
    }
  ]
}

```
# AWS IAM: Roles

## What Is a Role?
An **IAM role** is an AWS identity similar to a user, but instead of being associated with one specific person, it’s **assumed** by trusted entities (like AWS services, users, or applications) to perform temporary tasks.

Roles are used to **delegate access** without sharing long-term credentials.

## Key Features
- **No long-term credentials** (e.g., no password or access keys).
- **Temporary security credentials** issued when the role is assumed.
- Can be assumed by:
  - IAM users or federated users.
  - AWS services (e.g., EC2, Lambda).
  - External identities (via identity federation or organizations).
- Uses **permissions policies** to define what actions are allowed.
- Can include **trust policies** to define _who_ can assume the role.

## Trust vs. Permissions Policies
| Policy Type        | Purpose                                   |
|--------------------|-------------------------------------------|
| Trust Policy       | Specifies *who* can assume the role       |
| Permissions Policy | Specifies *what* the role can do          |

## Example Use Cases
- **EC2 instance role**: Grant an EC2 instance permission to access S3 buckets without storing credentials.
- **Cross-account access**: Allow users from another AWS account to assume a role in your account.
- **Federated access**: External identity providers (like Google or Microsoft AD) can access AWS via roles.

## 📌 Example Trust Policy (Snippet)

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Service": "ec2.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}
